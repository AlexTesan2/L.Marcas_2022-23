<html>
    <head>
        <title>Drag and Drop</title>
        <link rel="icon" type="image/x-icon" href="im/pupli.jpg">
        <script type="text/javascript" src="jquery-1.11.2.min.js"></script>
        <link rel="stylesheet" href="6.css" type="text/css">

        <script type="application/javascript">

            function empezar(event){
                event.dataTransfer.effectAllowed= "move";
                event.dataTransfer.setData("Data", event.target.getAttribute('id'));
                event.dataTransfer.setDragImage(event.target,25,25);
                return true;
            }

            function encima(event){
                var arrastraId=event.dataTransfer.getData("Data");
                var contenedorId= event.target.getAttribute("id");
                //alert(arrastraId+"-"+ contenedorId);//funciona con mozila
                if(contenedorId=='des1') return false;
                if((contenedorId=='des2')&&(arrastraId=='ar2')) return false;
                if((contenedorId=='des3')&&(arrastraId=='ar3')) return false;
            }

            function terminar(event){
                event.dataTransfer.clearData("Data");
                return true;
            }

            function soltar(event){
                var arrastraId=event.dataTransfer.getData("Data");
                event.target.appendChild(document.getElementById(arrastraId));
                event.stopPropagation();
                return false;
            }
         
        </script>


    </head>

    <body>
        <h1>Arrastrar y soltar con HTML5</h1>
        <div id="des1" ondragover="return encima(event)" ondrop="return soltar(event)">
            Contenedor1
        </div>
        <div id="des2" ondrop="return soltar(event)">
            Contenedor2
        </div>
        <div id="des3" ondrop="return soltar(event)">
            Contenedor3
        </div>
        <div id="ar1" draggable="true" ondragstart="return empezar(event)" ondragend="return terminar(event)"><!--Cuando se empieza y termona de arrastrar, se llama a ...-->
            A1
        </div>
        <div id="ar2" draggable="true" ondragstart="return empezar(event)" ondragend="return terminar(event)"> 
            A2
        </div>
        <div id="ar3" draggable="true" ondragstart="return empezar(event)" ondragend="return terminar(event)">
            A3
        </div>
    </body>
</html>